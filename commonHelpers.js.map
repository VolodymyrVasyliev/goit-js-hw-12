{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { form, page, input } from '../main';\nimport axios from 'axios';\n\nexport let limit = 15;\n\nexport async function fetchPhotoFromPixabay() {\n  let inputValueForForm;\n  if (page === 1) {\n    const inputSearch = form.elements.search;\n    inputValueForForm = inputSearch.value.trim().split(' ').join('+');\n  } else {\n    inputValueForForm = input.trim().split(' ').join('+');\n  }\n  const searchParams = new URLSearchParams({\n    key: '43179971-31cef5ae97b630d4ee80eef54',\n    q: [inputValueForForm],\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: [page],\n    per_page: [limit],\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const listOfPhotos = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderPhotos(arr) {\n  const markup = arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"photos-list-item\">\n            <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n            <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n            </a>\n            <ul class=\"photo-information-container\">\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n            </ul>\n            </li>`;\n      }\n    )\n    .join('');\n  listOfPhotos.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPhotoFromPixabay, limit } from './js/pixabay-api';\nimport { renderPhotos, listOfPhotos } from './js/render-functions';\n\nexport const form = document.querySelector('.search-form');\nexport let page = 1;\nexport let input = '';\nconst nextPageBtn = document.querySelector('.next-page-btn');\nhideElement(nextPageBtn);\nconst preloader = document.querySelector('.loader');\nhideElement(preloader);\nlet totalPages = 1;\n\nwindow.onload = handleLoad;\n\nform.addEventListener('submit', handleSendForm);\nnextPageBtn.addEventListener('click', handleNextPage);\n\nfunction handleSendForm(evt) {\n  evt.preventDefault();\n  listOfPhotos.innerHTML = '';\n  const newInput = evt.target.elements.search.value.trim();\n  if (newInput !== '') {\n    page = 1;\n    input = newInput;\n    handleSubmit();\n  } else {\n    return iziToast.show({\n      message: 'Please complete the field!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  }\n}\n\nasync function handleSubmit() {\n  try {\n    hideElement(nextPageBtn);\n    showElement(preloader);\n    if (page <= totalPages) {\n      const photoFromPixabay = await fetchPhotoFromPixabay();\n      if (photoFromPixabay.totalHits != 0) {\n        totalPages = Math.ceil(photoFromPixabay.totalHits / limit);\n        renderPhotos(photoFromPixabay.hits);\n        const itemOfList = listOfPhotos.querySelector('.photos-list-item');\n        const domRect = itemOfList.getBoundingClientRect();\n        window.scrollBy({\n          top: domRect.height * 2,\n          behavior: 'smooth',\n        });\n        if (page < totalPages) {\n          showElement(nextPageBtn);\n        } else {\n          iziToast.info({\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            position: 'topRight',\n            message: \"We're sorry, there are no more images to load\",\n          });\n        }\n      } else {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          theme: 'dark',\n          progressBarColor: '#FFFFFF',\n          color: '#EF4040',\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: `${error.message}`,\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    hideElement(preloader);\n    handleLoad();\n    form.reset();\n  }\n}\n\nfunction handleNextPage() {\n  ++page;\n  handleSubmit();\n}\n\nfunction showElement(element) {\n  element.classList.toggle('hidden');\n  element.style.display = 'flex';\n}\n\nfunction hideElement(element) {\n  element.classList.toggle('hidden');\n  element.style.display = 'none';\n}\n\nfunction handleLoad() {\n  document.body.classList.add('loaded');\n  document.body.classList.remove('loaded_hiding');\n}\n"],"names":["limit","fetchPhotoFromPixabay","inputValueForForm","page","form","input","searchParams","axios","listOfPhotos","lightbox","SimpleLightbox","renderPhotos","arr","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","nextPageBtn","hideElement","preloader","totalPages","handleLoad","handleSendForm","handleNextPage","evt","newInput","handleSubmit","iziToast","showElement","photoFromPixabay","domRect","error","element"],"mappings":"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"}